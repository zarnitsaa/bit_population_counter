module bit_population_counter #(

parameter int WIDTH

)(
input logic clk_i,
input logic srst_i,
input logic [WIDTH:0] data_i,
input logic data_val_i,
output logic [@clog2(WIDTH)+1:0] data_i,
output logic data_val_o
);

logic [WIDTH:0]=width;
assign width=WIDTH;
assign data_val_o=data_val_i;
always@(posedge_clk_i)

begin
	if (srst_i)
		data_val_o<=0;
	else if (data_val_i)
		do begin
			data_o<=data_o+data_i[width];
			width<=width-1;
		end while [width==0];
	else
		data_o<=1'b0;
end
endmodule
